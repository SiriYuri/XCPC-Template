```cpp
template<typename T>
struct Fenwick {
  int n;
  std::vector<T> a;

  Fenwick (int _n) : n(_n - 1), a(_n, 0) {}

  void add(int x, T v) {
    for (int i = x; i <= n; i += i & -i) {
      a[i] += v;
    }
  }

  T query(int x) {
    T ans{};
    for (int i = x; i >= 1; i -= i & -i) {
      ans += a[i];
    }
    return ans;
  }

  T rangesum(int l, int r) {
    return query(r) - query(l - 1);
  }
};
```
